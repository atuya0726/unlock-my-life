これまでの議論（コンセプト、ゲームロジック、DB設計、プラットフォーム選定）をすべて統合し、開発フェーズにそのまま移行可能な\*\*「Unlock My Life」最終決定版 要件定義書\*\*を作成しました。

-----

# 「Unlock My Life」Webアプリケーション要件定義書

**プロジェクト:** Unlock My Life
**バージョン:** Final (Integrated)
**作成日:** 202X年X月X日
**プラットフォーム:** Web Application (Responsive / PWA)

-----

## 1\. プロジェクト概要 (Overview)

### 1.1 コンセプト

人生におけるあらゆる成果（資格、資産、経験、身体能力）をゲームの「実績（Achievement）」として記録し、他者と競い合う\*\*「人生実績解除・対戦プラットフォーム」\*\*。
習慣化やToDo管理の要素は排除し、「結果（マイルストーン）」の収集と「ステータス（パラメータ）」の育成、そして「ランキング」による競争のみにフォーカスする。

### 1.2 プラットフォーム要件

  * **形態:** Webアプリケーション（SPA推奨）。
  * **デバイス対応:** モバイルファースト（スマホブラウザでの利用を主軸）かつ、PCデスクトップでの閲覧にも対応するレスポンシブデザイン。
  * **PWA対応:** ホーム画面に追加可能とし、ネイティブアプリに近い操作感を提供する。

-----

## 2\. ユーザー区分と権限 (User Roles)

| アクター | クラス | 権限・特徴 |
| :--- | :--- | :--- |
| **Free User** | 一般 (無料) | ・**ランキング:** Casual League（エンジョイ勢）のみ参加。<br>・**実績解除:** 自己申告のみ（ポイント等倍）。<br>・**本人確認:** 不要（匿名利用可）。 |
| **Premium User** | 月額課金 | ・**ランキング:** **Pro League**（ガチ勢）に参加権。<br>・**実績解除:** 証拠画像提出が可能（**ポイント2倍**）。<br>・**本人確認:** **必須**（本名登録）。 |
| **Admin** | 運営管理者 | ・公式実績データの管理。<br>・UGC（ユーザー作成実績）の監視と公式昇格（Promote）。<br>・システム管理、KPI閲覧。 |

-----

## 3\. ゲームメカニクス (Game Mechanics)

### 3.1 5大ステータス (Life Status)

すべての実績は、以下の5つのカテゴリのうち**必ず1つ**に属する（排他制御）。

| ID | 略称 | カテゴリ名 | 定義・判定ロジック |
| :--- | :--- | :--- | :--- |
| **1** | **INT** | **Intellect (知力)** | **【脳内資産】** 知識、スキル、資格、学歴。<br>*(例: 資格取得、プログラミング習得)* |
| **2** | **WLT** | **Wealth (財力)** | **【金融資産】** お金、市場価値のある所有物。<br>*(例: 年収、不動産・車購入、投資)* |
| **3** | **VIT** | **Vitality (体力)** | **【肉体資産】** 筋力、健康、運動能力。<br>*(例: マラソン完走、ベンチプレス、健康診断)* |
| **4** | **SOC** | **Social (社会)** | **【関係資産】** 影響力、地位、人脈、家族。<br>*(例: フォロワー数、昇進、結婚、表彰)* |
| **5** | **EXP** | **Experience (経験)** | **【精神資産】** 思い出、行動、移動、消費体験。<br>*(例: 旅行、アクティビティ、高級食)* |

  * **判定ルール:** 「後に残るものは『資産(WLT)』か『記憶(EXP)』か？」を基準に分類する。

### 3.2 ポイント計算ロジック

実績 $i$ の獲得スコア $Score$ は以下の式で算出される。

$$Score = BasePoint_i \times TypeRatio \times ProofMultiplier$$

  * **BasePoint:** 実績ごとに設定された基礎点。
  * **TypeRatio:**
      * **公式実績 (Official):** **1.0** (基準)
      * **ユーザー実績 (UGC):** **0.1** (乱立防止のため低く設定)
  * **ProofMultiplier:**
      * **証拠なし / 審査落ち:** **1.0**
      * **証拠あり (Verified):** **2.0** (Premium限定)

### 3.3 ランキングシステム (Leaderboard)

以下のランキングを常時集計・公開する。

  * **区分:** Pro League / Casual League
  * **種別 (計6種):** Total (総合), INT, WLT, VIT, SOC, EXP (各部門別)

-----

## 4\. 機能要件 (Functional Requirements)

### 4.1 実績管理・検索

  * **公式実績 (Official):** 運営が管理する高品質なマスターデータ。
  * **ユーザー実績 (UGC):** ユーザーが自由に作成可能。検索順位は公式より下げる。
  * **タグシステム:** `#海外旅行` `#グルメ` など、1つの実績に複数のタグを付与可能（検索用）。
  * **ステータスチャート:** ユーザーの獲得GPを元に五角形のレーダーチャートを描画。

### 4.2 実績解除フロー (Unlock)

1.  **通常解除:** ボタンタップのみ。即時反映。
2.  **証拠付き解除 (Verified):**
      * **対象:** Premiumユーザーのみ。
      * **入力:** 画像アップロード（カメラ/ライブラリ）。
      * **処理:** AIによるバックグラウンド審査。

### 4.3 AI審査システム (The Judge)

  * **技術:** Vision API / OCR
  * **判定基準:**
    1.  画像内からテキストを抽出。
    2.  ユーザーの「本名」が含まれているか？
    3.  実績に関連する「キーワード（合格、証明書など）」が含まれているか？
  * **結果:** 一致すれば承認（x2.0反映）、不一致なら却下（x1.0のまま）。

### 4.4 Web固有機能

  * **OGP生成:** 実績解除画面をSNSシェアした際、動的に「達成カード画像」を生成して表示する。
  * **公開プロフィールURL:** `unlockmylife.com/u/{username}` で自身のステータスを外部公開可能（設定で非公開可）。

-----

## 5\. データベース設計 (Schema Design)

タグの重複を防ぐため、中間テーブルを用いた正規化を行う。

### 主要テーブル構成

  * **Users**
      * `user_id`, `display_name`, `real_name` (Encrypted), `is_premium`, `auth_provider`
  * **Categories** (Master)
      * `category_id` (1\~5), `name`, `color_code`
  * **Tags** (Master)
      * `tag_id`, `name` (Unique), `usage_count`
  * **Achievements**
      * `achievement_id`
      * `category_id` (FK -\> Categories)
      * `title`, `base_points`
      * `is_official` (Boolean)
  * **Achievement\_Tags** (Pivot Table)
      * `id`, `achievement_id` (FK), `tag_id` (FK)
  * **Unlocks**
      * `unlock_id`
      * `user_id` (FK), `achievement_id` (FK)
      * `proof_status` (PENDING, VERIFIED, REJECTED, NONE)
      * `earned_points` (Snapshot)

-----

## 6\. 非機能要件 (Non-Functional Requirements)

  * **セキュリティ:** `real_name` および証拠画像は最高レベルの機密情報として扱い、審査完了後は速やかに画像を破棄または暗号化ストレージへ移動する。
  * **パフォーマンス:** 実績リストが数万件になっても、スクロールや検索が遅延しないよう、ページネーションまたはVirtual Scrollingを実装する。
  * **SEO:** 実績詳細ページやユーザープロフィールページが検索エンジンにインデックスされる構造にする（SPAの場合、SSR/SSGを検討）。

-----

## 7\. UIデザイン指針

  * **世界観:** 人生をゲームとして捉える「没入感」のあるデザイン。
  * **カラーコーディング:** 5大ステータスを色で識別させる。
      * INT(青), WLT(金), VIT(赤), SOC(紫), EXP(緑)
  * **レスポンシブ:**
      * **Mobile:** 下部タブバーによるアプリライクな操作性。
      * **Desktop:** 多列レイアウトを活用したダッシュボード表示。

-----

## 8\. コンテンツ運用・ロードマップ

  * **Phase 1 (ローンチ):**
      * コア機能（Unlock, AI審査, Ranking）の実装。
      * 公式実績データ：約1,000件（主要な資格、資産、経験）。
  * **Phase 2 (拡張):**
      * 管理画面強化：UGCから公式への「昇格（Promote）」フローの効率化。
      * 検索機能強化：タグ検索、リコメンド（「次はこの実績どうですか？」）。
  * **Phase 3 (収益化強化):**
      * 企業タイアップ実績（スポンサードクエスト）の導入。

-----

以上が最終要件定義書です。
Webアプリとしての強みを活かしつつ、データの整合性とゲームバランスを厳密に管理する設計になっています。